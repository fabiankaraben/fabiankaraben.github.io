---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";
import { Image } from "astro:assets";

import "../styles/global.css";

// type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
    <head>
        <BaseHead title={title} description={description} />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet" />
    </head>

    <body class="antialiased">
        <div class="tech-grid-background"></div>

        <!-- Main Container -->
        <div class="relative z-10 min-h-screen p-2 sm:p-4 md:p-6 lg:p-8 max-w-screen-xl mx-auto">
            <Header />
            <main class="w-full max-w-full m-0">
                <article class="py-8 sm:py-12 md:py-16">
                    <div class="w-full px-2 sm:px-4">
                        {heroImage && <Image width={720} height={360} src={heroImage} alt="" class="block mx-auto rounded-xl shadow-[var(--box-shadow)]" />}
                    </div>
                    <div class="w-full max-w-[900px] mx-auto px-4 sm:px-6 md:px-8 text-[rgb(var(--gray-light))]">
                        <div class="mb-6 sm:mb-8 py-4 text-center leading-none">
                            <div class="mb-3 sm:mb-4 text-sm sm:text-base text-[rgb(var(--gray))]">
                                <FormattedDate date={pubDate} />
                                {
                                    updatedDate && (
                                        <div class="italic">
                                            Last updated on <FormattedDate date={updatedDate} />
                                        </div>
                                    )
                                }
                            </div>
                            <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold relative after:content-[''] after:absolute after:left-1/2 after:transform after:-translate-x-1/2 after:bottom-[-8px] after:w-[40px] sm:after:w-[50px] after:h-[3px] after:bg-orange-500 after:rounded-[2px] after:shadow-[0_0_8px_rgba(249,115,22,0.5)] mb-8 sm:mb-12">{title}</h1>
                        </div>
                        <slot />
                    </div>
                </article>
            </main>
            <Footer />
        </div>
    </body>
</html>

<style is:inline>
    /* Futuristic and Modern Styles for Blog Posts */

    /* General Body and Font styles */
    body {
        font-family:
            "Inter",
            -apple-system,
            BlinkMacSystemFont,
            "Segoe UI",
            Roboto,
            "Helvetica Neue",
            Arial,
            sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Headings with glow and modern look */
    article h1,
    article h2,
    article h3,
    article h4,
    article h5,
    article h6 {
        margin: 2rem 0 1.5rem 0;
        color: #e0e0e0; /* Lighter gray for better contrast on dark backgrounds */
        line-height: 1.3;
        font-weight: 700;
        text-shadow:
            0 0 5px rgba(249, 115, 22, 0.3),
            0 0 10px rgba(15, 23, 42, 0.5);
    }

    article h1 {
        font-size: 2.8em;
    }
    article h2 {
        font-size: 2.2em;
    }
    article h3 {
        font-size: 1.8em;
    }
    article h4 {
        font-size: 1.5em;
    }
    article h5 {
        font-size: 1.25em;
    }
    article h6 {
        font-size: 1.1em;
    }

    /* Links with a futuristic hover effect */
    article a {
        color: #f97316;
        text-decoration: none;
        transition: all 0.3s ease;
        text-shadow: 0 0 3px rgba(249, 115, 22, 0.5);
    }
    article a:hover {
        color: #fbd38d;
        text-shadow: 0 0 5px rgba(249, 115, 22, 0.8);
    }

    /* Paragraphs with better readability */
    article p {
        margin-bottom: 1.5em;
        line-height: 1.7;
        color: #b0b0b0; /* Softer gray for body text */
    }

    /* Code blocks with a modern, dark theme */
    article code {
        padding: 3px 6px;
        background-color: #1a1a1a;
        color: #f97316;
        border-radius: 5px;
        font-family: "Fira Code", "Courier New", monospace;
        font-size: 0.95em;
    }

    article pre {
        padding: 1.5em;
        border-radius: 10px;
        background-color: #121212;
        border: 1px solid #2a2a2a;
        color: #e0e0e0;
        overflow-x: auto;
        margin: 2rem 0;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }

    article pre > code {
        all: unset;
        font-family: "Fira Code", "Courier New", monospace;
        line-height: 1.5;
    }

    /* Blockquotes with a futuristic design */
    article blockquote {
        border-left: 3px solid;
        border-image: linear-gradient(to bottom, #f97316, #fbd38d) 1;
        padding: 1em 1.5em;
        margin: 2rem 0;
        font-style: italic;
        color: #c0c0c0;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 0 8px 8px 0;
    }

    /* Horizontal rule with a gradient */
    article hr {
        border: none;
        height: 2px;
        background-image: linear-gradient(to right, transparent, #f97316, #fbd38d, transparent);
        margin: 3rem 0;
    }

    /* Image styles */
    article img {
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        margin: 2rem auto;
        box-shadow:
            0 0 20px rgba(249, 115, 22, 0.2),
            0 0 30px rgba(15, 23, 42, 0.3);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        article h1 {
            font-size: 2.4em;
        }
        article h2 {
            font-size: 2em;
        }
        article h3 {
            font-size: 1.6em;
        }
        article p {
            line-height: 1.6;
        }
    }

    @media (max-width: 480px) {
        body {
            font-size: 16px;
        }
        article h1 {
            font-size: 2em;
        }
        article h2 {
            font-size: 1.7em;
        }
        article h3 {
            font-size: 1.4em;
        }
        article pre {
            padding: 1em;
        }
        article blockquote {
            padding: 1em;
        }
    }

    .sr-only {
        border: 0;
        padding: 0;
        margin: 0;
        position: absolute !important;
        height: 1px;
        width: 1px;
        overflow: hidden;
        /* IE6, IE7 - a 0 height clip, off to the bottom right of the visible 1px box */
        clip: rect(1px 1px 1px 1px);
        /* maybe deprecated but we need to support legacy browsers */
        clip: rect(1px, 1px, 1px, 1px);
        /* modern browsers, clip-path works inwards from each corner */
        clip-path: inset(50%);
        /* added line to stop words getting smushed together (as they go onto separate lines and some screen readers do not understand line feeds as a space */
        white-space: nowrap;
    }
</style>
