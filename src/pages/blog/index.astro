---
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <BaseHead title={`Blog | ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
    </head>
    <body class="antialiased">
        <div class="aurora-background"></div>
        <div class="relative z-10 min-h-screen p-4 sm:p-6 lg:p-8 max-w-screen-xl mx-auto flex flex-col">
            <Header />
            <main class="flex-grow">
                <section class="py-24">
                    <h2 class="text-3xl font-bold relative after:content-[''] after:absolute after:left-0 after:bottom-[-8px] after:w-[50px] after:h-[3px] after:bg-cyan-400 after:rounded-[2px] after:shadow-[0_0_10px_#00c6ff] mb-12">Blog Articles</h2>
                    <ul class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {
                            posts.map((post) => (
                                <li class="group bg-[rgba(17,24,39,0.6)] backdrop-blur-[10px] border border-[rgba(255,255,255,0.1)] rounded-lg p-6 flex flex-col transition-all duration-300 hover:border-cyan-400">
                                    <a href={`/blog/${post.id}/`} class="flex-grow">
                                        <h4 class="text-xl font-bold mb-2 text-gray-100 group-hover:text-cyan-400 transition-colors">{post.data.title}</h4>
                                        <p class="text-sm text-cyan-300 mb-4 font-mono">
                                            <FormattedDate date={post.data.pubDate} />
                                        </p>
                                        <p class="text-gray-400 leading-relaxed text-sm line-clamp-3">{post.data.description}</p>
                                    </a>
                                </li>
                            ))
                        }
                    </ul>
                </section>
            </main>
            <Footer />
        </div>
    </body>
</html>
